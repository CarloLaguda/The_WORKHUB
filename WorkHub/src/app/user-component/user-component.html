<div class="filters">
  <label>
    Et√† minima:
    <input type="number" [(ngModel)]="filterAge" />
  </label>

  <label>
    Skill:
    <select [(ngModel)]="filterSkill">
      <option value="">-- Tutte le skill --</option>
      @for (skill of skillsList; track skill) {
        <option [value]="skill">{{ skill }}</option>
      }
    </select>
  </label>

  <label>
    Paese:
    <select [(ngModel)]="filterCountry">
      <option value="">-- Tutti i paesi --</option>
      @for(country of countriesList; track country) {
        <option [value]="country">{{ country }}</option>
      }
    </select>
  </label>

  <button (click)="applyFilters()">Filtra</button>
  <button (click)="clearFilters()">Reset</button>
</div>

<hr />

@if (Users | async; as Users) {
  <div>
    @for (u of Users; track u.user_id) {
      <div class="user-card">
        <p><b>{{ u.first_name }} {{ u.last_name }}</b></p>
        <p>Et√†: {{ u.eta }}</p>

        <!-- üîπ Toggle solo per questo utente -->
        <button (click)="toggleDetails(u.user_id)">
          {{ expandedUserId === u.user_id ? 'Nascondi dettagli' : 'Scopri di pi√π' }}
        </button>

        <!-- üîπ Mostra dettagli solo se questo utente √® espanso -->
        @if (expandedUserId === u.user_id) {
          <div class="details">
            <p>Skill: {{ u.skills }}</p>
            <p>Paese: {{ u.country }}</p>
            <p>Anni di esperienza: {{ u.anni_di_esperienza }}</p>
            <p>Status: {{ u.status }}</p>
          </div>
        }
      </div>
      <br>
    }
  </div>
} @else {
  <p>Caricamento in corso...</p>
}
