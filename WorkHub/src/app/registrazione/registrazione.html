<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<div class="pagina">
    <div class="immagine">
        <img class="img_pagina" src="">
        <div class="wave-container">
            <svg viewBox="0 0 1000 200" preserveAspectRatio="none" style="width: 920px; height: 250px;transform: rotate(270deg);">
                <path
                    d="M0,200 L0.0,100.0 C 6.3,100.7 18.8,102.2 25.0,102.9 C 31.3,103.6 43.8,105.0 50.0,105.7 C 56.3,106.3 68.8,107.5 75.0,108.1 C 81.3,108.6 93.8,109.7 100.0,110.2 C 106.3,110.6 118.8,111.3 125.0,111.7 C 131.3,112.0 143.8,112.5 150.0,112.7 C 156.3,112.8 168.8,112.9 175.0,113.0 C 181.3,112.9 193.8,112.8 200.0,112.7 C 206.3,112.5 218.8,112.0 225.0,111.7 C 231.3,111.3 243.8,110.5 250.0,110.1 C 256.3,109.6 268.8,108.5 275.0,108.0 C 281.3,107.4 293.8,106.2 300.0,105.6 C 306.3,104.9 318.8,103.5 325.0,102.8 C 331.3,102.1 343.8,100.6 350.0,99.9 C 356.3,99.2 368.8,97.7 375.0,97.0 C 381.3,96.3 393.8,94.9 400.0,94.2 C 406.3,93.6 418.8,92.4 425.0,91.8 C 431.3,91.3 443.8,90.2 450.0,89.7 C 456.3,89.3 468.8,88.6 475.0,88.2 C 481.3,88.0 493.8,87.5 500.0,87.3 C 506.3,87.2 518.8,87.1 525.0,87.0 C 531.3,87.1 543.8,87.3 550.0,87.4 C 556.3,87.7 568.8,88.2 575.0,88.4 C 581.3,88.8 593.8,89.6 600.0,90.0 C 606.3,90.5 618.8,91.5 625.0,92.0 C 631.3,92.6 643.8,93.9 650.0,94.5 C 656.3,95.2 668.8,96.6 675.0,97.3 C 681.3,98.0 693.8,99.5 700.0,100.2 C 706.3,100.9 718.8,102.4 725.0,103.1 C 731.3,103.8 743.8,105.2 750.0,105.9 C 756.3,106.5 768.8,107.7 775.0,108.3 C 781.3,108.8 793.8,109.8 800.0,110.3 C 806.3,110.7 818.8,111.4 825.0,111.8 C 831.3,112.0 843.8,112.5 850.0,112.7 C 856.3,112.8 868.8,112.9 875.0,113.0 C 881.3,112.9 893.8,112.7 900.0,112.6 C 906.3,112.3 918.8,111.8 925.0,111.6 C 931.3,111.2 943.8,110.4 950.0,110.0 C 956.3,109.5 968.8,108.4 975.0,107.9 C 981.3,107.3 993.8,106.0 1000.0,105.4 C 1006.3,104.7 1018.8,103.3 1025.0,102.6 L1000.0,200.0 L0,200.0Z"
                    fill="#ffffff">
                    <animate attributeName="d" dur="14.0s" repeatCount="indefinite" values="..."/>
                </path>
            </svg>
        </div>
    </div>

    <div class="registrazione">
        <button></button>
        <button routerLink="/" class="btn3">?</button>
        <div class="testo">
            <h1>JOIN <span class="highlight">HOBBYHUB</span> AND TAKE PART IN A PROJECT</h1>
            <p>
                To access the platform and start creating your personal projects, you need to provide us with some basic information.<br><br>
                This data allows us to offer you a personalized experience and ensure the proper functioning of our services.  
                All information will be treated with the utmost confidentiality, in accordance with current regulations and in full compliance with our <a class="link" href="#" routerLink="/info">privacy policy</a>.
            </p><br>
        </div>

        <input placeholder="username" #username>
        
        <div class="nome-cognome">
            <input placeholder="first name" #nome>
            <input placeholder="last name" #cognome>
        </div>

        <input placeholder="email" #email>
        
        <div class="data-genere">
            <div class="date-container">
                <input type="date" id="eta" #eta required>
                <label for="dataNascita" [class.filled]="dataNascita">Date of birth</label>
            </div>
            <select #gender>
                <option value="" disabled selected>Select gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>

        <div class="password-container">
            <input 
                [type]="showPassword ? 'text' : 'password'" 
                placeholder="password" 
                #password>
            <span class="toggle-password" (click)="togglePassword()">
                <i [class]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
            </span>
        </div>

        <div class="password-container">
            <input 
                [type]="showPassword1 ? 'text' : 'password'" 
                placeholder="confirm password" 
                #conf_pass>
            <span class="toggle-password" (click)="togglePassword1()">
                <i [class]="showPassword1 ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
            </span>
        </div>

        <p *ngIf="passwordError" class="password-error">
            ⚠️ Passwords do not match
        </p>

        <br>
        <div class="check">
            <label>
                <input type="checkbox" class="checks">
                <span></span>
                I agree to the management of personal information for misuse purposes.
            </label>
            <label>
                <input type="checkbox" class="checks">
                <span></span>
                I entrust my credentials to the Mexican cartel and accept advertisements.
            </label>
        </div>

        <div class="bottoni">
            <button routerLink="/">BACK</button>
            <button class="btn1" (click)="register_start(username, email, password, conf_pass, nome, cognome, eta, gender)">SIGN UP</button>
            <button class="btn2" routerLink="/signIn">SIGN IN</button>
        </div>
    </div>
</div>

<!-- ✅ POPUP SUCCESSO -->
<div class="popup-overlay" *ngIf="popupType === 'success'">
    <div class="popup" (click)="$event.stopPropagation()">
        <h2>✅ Registration Successful</h2>
        <p>Your account has been created successfully!</p>
        <button (click)="closePopup()" routerLink="/signIn">Close</button>
    </div>
</div>

<!-- ❌ POPUP ERRORE -->
<div class="popup-overlay" *ngIf="popupType === 'error'">
    <div class="popup" (click)="$event.stopPropagation()">
        <h2>⚠️ Registration Failed</h2>
        <p>{{ errorMessage }}</p>
        <button (click)="closePopup()">Close</button>
    </div>
</div>
